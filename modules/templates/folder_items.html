{% extends "base.html" %}

{% block body %}
<title>{{ folder.name }}</title>
<h1 class="display-1 text-center">{{ folder.name }}
  <a href="#" data-toggle="modal" data-target="#addModal" class="unstyled-link">
    <small>+</small>
  </a>
  <a href="{{ url_for('delete_folder', id_=folder.id) }}" class="unstyled-link">
    <small>-</small>
  </a>
</h1>
<h6 class="text-center">Sort by:
  {% if order_by == "priority" %}
  <a class="m-3 unstyled-link" href="{{ url_for('folder_items', id_=folder.id, order_by='date_added desc') }}">Date</a>
  {% elif order_by == "date_added desc" %}
  <a class="m-3 unstyled-link" href="{{ url_for('folder_items', id_=folder.id, order_by='priority') }}">Priority</a>
  {% endif %}
</h6>
<div class="row">
  {% for i in folder.get_tasks(order_by) %}
  <div class="col-4">
    <div class="bg-light shadow card-body rounded mb-4">
      <a href="{{ url_for('delete_task', id_=i.id, order_by=order_by) }}" class="close text-danger">x</a>
      <h5 class="card-title">{{ i.title }}</h5>
      <p class="text-muted font-italic">{{ i.date_added.strftime("%B %d") }}</p><br>
      <span class="{{ i.get_priority()[1] }}">{{ i.get_priority()[0] }}</span><br>
      <a href="{{ url_for('toggle_done', id_=i.id, order_by=order_by) }}" class="{{ i.get_done()[1] }}">{{ i.get_done()[0] }}</a>
    </div>
  </div>
  {% endfor %}
</div>

<div class="modal" id="addModal" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">New Task</h5>
        <button type="button" class="close" data-dismiss="modal">
          <span>Ã—</span>
        </button>
      </div>
      <div class="modal-body">
        <form class="form-group add-form" method="POST" action="{{ url_for('folder_items', id_=folder.id, order_by=order_by) }}">
          <input name="task_title" type="text" class="form-control" placeholder="Task Title" autocomplete="off">
          <input name="task_notes" type="text" class="form-control" placeholder="Notes" autocomplete="off">
          <select name="priority" class="custom-select">
            <option value="3">Low</option>
            <option value="2">Medium</option>
            <option value="1">High</option>
          </select>
          <button type="submit" class="btn btn-secondary col-6 offset-3">Add</button>
        </form>
      </div>
    </div>
  </div>
</div>
{% endblock %}

